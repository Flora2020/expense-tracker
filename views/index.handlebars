{{> message}}
<div class="row mt-3">
  <div class="col-md-8">
    <form action="/" method="get" class="row">
      <div class="col-auto">
        <select class="form-select" name="category" aria-label="select category" data-selected="{{selectedCategory}}"
          id="categoryRecord" onchange="submit();">
          <option value="" selected>所有分類</option>
          {{#each categories}}
          <option value="{{this.name}}">{{this.name}}</option>
          {{/each}}
        </select>
      </div>
      <div class="col-auto">
        <input type="text" class="form-control" name="year" placeholder="西元年 eg. 1984" aria-label="select category"
          value="{{year}}">
      </div>
      <div class="col-auto">
        <select class="form-select" name="month" aria-label="select month" onchange="submit();">
          <option value="" selected>所有月份</option>
          {{#each monthOption}}
          {{#isEqual selectedMonth month}}
          <option value="{{this}}" selected>{{this}}</option>
          {{else}}
          <option value="{{this}}">{{this}}</option>
          {{/isEqual}}
          {{/each}}
        </select>
      </div>
    </form>
  </div>
</div>

<div class="row mt-3">
  <div class="col-md-8 d-flex justify-content-around">
    <div class="total-amount-title">總金額：</div>
    <div class="total-amount">{{totalAmount}}</div>
  </div>
</div>

{{#each records}}
<div class="row flex-md-nowrap record">
  <div class="col-md-1 d-flex align-items-center justify-content-center icon">
    {{{this.iconHTML}}}
  </div>
  <div class="col-md-3 py-2 flex-column-center">
    <div class="name mb-1">{{this.name}}</div>
    <div class="date">{{this.date}}</div>
  </div>
  <div class="col-md-4 flex-column-right flex-column-center">
    <div class="amount mb-1">{{this.amount}}</div>
    <div class="marchant">{{this.merchant}}</div>
  </div>
  <div class="col-md-4 d-flex justify-content-evenly align-items-center button-box">
    <form action="/records/{{this._id}}/edit" method="get">
      <button class="btn" type="submit">修改</button>
    </form>
    <form action="/records/{{this._id}}?_method=DELETE" method="POST">
      <button class="btn btn-delete" type="submit">刪除</button>
    </form>
  </div>
</div>
{{/each}}

<div class="row">
  <div class="col-md-8">
    <a href="/records/new" class="btn btn-new btn-major w-75">新增支出</a>
  </div>
</div>